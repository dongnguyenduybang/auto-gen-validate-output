{
  "method": "POST",
  "path": "/Message/SendMessage",
  "headers": {
    "Content-Type": "application/json",
    "x-session-token": "{{mockUser[0].token}}",
    "x-country-code": "VN"
  },
  "payload": {
    "workspaceId": "0",
    "channelId": "{{getChannel.isChannelId}}",
    "content": "test123123",
    "ref": "ref"
  },
  "beforeAll": [
    "mockUser(body: { prefix: 'duy12345',quantity: 2,badge: 0 }, expect: {})",
    "createChannel(body: {name: 'channel 1', workspaceId: '0'}, header: {token: '{{mockUser[0].token}}'}, expect: {isOwner: '{{mockUser[0].userId}}' } )",
    "getChannel(body: {workspaceId: '0', channelId: '{{createChannel.isChannelId}}'}, header: {token: '{{mockUser[0].token}}'}, expect: {countMember: 1, countMessage: 1, isChannelId: '{{createChannel.isChannelId}}',isLastMessage: '{{createChannel.messageId}}', isContent: '{{createChannel.isContent}}', isOwner: '{{mockUser[0].userId}}'})"
  ],
  "saga": [
    "acceptChannel(body: {invitationLink: '{{getChannel.invitationLink}}'}, header: {token: '{{mockUser[1].token}}'})",
    "sendMessage(body: {workspaceId: '0', channelId: '{{getChannel.isChannelId}}', content: 'user send message'}, header: {token: '{{mockUser[1}.token}'}, expect: {})",
    "getChannel(body: {workspaceId: '0', channelId: '{{createChannel.isChannelId}}'}, header: {token: '{{mockUser[0].token}}'}, expect: {countMember: 2, countMessage: 3, isChannelId: '{{createChannel.isChannelId}}',isLastMessage: '{{createChannel.messageId}}', isContent: '{{createChannel.isContent}}', isOwner: '{{mockUser[0].userId}}'})",
    "getListMessage(body: { workspaceId: '0', channelId: '{{sendMessage.channelId}}' }, header: {token: '{{mockUser.token}}' }, expect: {isLastMessage: '{{sendMessage.messageId}}', isLastContent: '{{sendMessage.content}}', isSender: '{{sendMessage.senderId}}' })"
  ]
}